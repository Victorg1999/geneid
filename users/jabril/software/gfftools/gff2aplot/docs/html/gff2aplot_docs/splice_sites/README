#
# README for two colors alignment gff2aplot example
# 
#
# $Id: README,v 1.2 2003-03-04 19:06:09 jabril Exp $
#

#
# Original Files
#
# KCRB.AG.hs.gff KCRB.AG.mm.gff KCRB.AG.hs-mm.gff_tmp
# KCRB.GT.hs.gff KCRB.GT.mm.gff KCRB.GT.hs-mm.gff

# 
# Fixing GFF input files
#
# gawk '{$6=sprintf("%.2f",$6);
#        $9=$6;
#        print $0}' KCRB.AG.hs-mm.gff_tmp > KCRB.AG.hs-mm.gff
# cp KCRB.AG.hs.gff KCRB.hs.gff~
# cp KCRB.AG.mm.gff KCRB.mm.gff~
# 
# sort +3n -4 KCRB.hs.gff~ KCRB.hs_utr.gff > KCRB.hs.gff
# sort +3n -4 KCRB.mm.gff~ KCRB.mm_utr.gff > KCRB.mm.gff

#
# Running gff2aplot: GFF -> PS
BIN="$HOME/development/softjabril/gfftools/gff2aplot/bin"
# GT - DONORS
$BIN/gff2aplot.pl -v -t "DONOR SITES" \
                  -- KCRB.hs.gff \
                     KCRB.mm.gff \
                     KCRB.GT.hs-mm.gff \
                   > KCRB.GT.hs-mm.ps \
                  2> KCRB.GT.hs-mm.log;
# AG - ACCEPTORS
$BIN/gff2aplot.pl -v -t "ACCEPTOR SITES" \
                  -- KCRB.hs.gff \
                     KCRB.mm.gff \
                     KCRB.AG.hs-mm.gff \
                   > KCRB.AG.hs-mm.ps \
                  2> KCRB.AG.hs-mm.log;
# GT + AG
$BIN/gff2aplot.pl -v -t "DONOR + ACCEPTOR SITES" \
                  -- KCRB.hs.gff \
                     KCRB.mm.gff \
                     KCRB.GT.hs-mm.gff \
                     KCRB.AG.hs-mm.gff \
                   > KCRB.GT-AG.hs-mm.ps \
                  2> KCRB.GT-AG.hs-mm.log;

# Extra customization
cat > GT-AG.rc <<'+++EOF+++'
#
# L #
# percent_box_label=SIMILARITY
# percent_box_label_fontsize=10pt
show_percent_box=on
percent_box_score_range=0.0..1.0
major_tickmark_score=0.25
minor_tickmark_score=0.05
x_label=Homo sapiens
x_label_font=helvetica-boldoblique
y_label=Mus musculus
y_label_font=helvetica-boldoblique
ribbon_color_merge=on
color_merge_factor=0.5
aplot_score_range=0..1
#
# G #
*::group_shape=arrow
#
# F #
utr::feature_color=lightgrey
exon::feature_color=darkorange
exon::show_ribbons=on
utr::show_ribbons=on
exon::ribbon_style=both
utr::ribbon_style=ribbons
exon::ribbon_color=lightyellow
utr::ribbon_color=palegrey
# GT - Donors
alignGT::alignment_color=darkred
# AG - Acceptors
alignAG::alignment_color=darkblue
*::alignment_scale_color=on
+++EOF+++
# GT + AG
$BIN/gff2aplot.pl -v -t "DONOR + ACCEPTOR SITES (Color Version)" \
                  --x-sequence-coords 0..4200 \
                  --y-sequence-coords 0..4600 \
                  --custom-filename GT-AG.rc \
                  -- KCRB.hs.gff \
                     KCRB.mm.gff \
                     KCRB.GT.hs-mm.gff \
                     KCRB.AG.hs-mm.gff \
                   > KCRB.GT-AG.hs-mm.color.ps \
                  2> KCRB.GT-AG.hs-mm.color.log;

# Extra customization
cat > GT-AG_sm.rc <<'+++EOF+++'
# L #
color_merge_factor=2
+++EOF+++
# GT + AG
$BIN/gff2aplot.pl -v -t "DONOR + ACCEPTOR SITES (Color Version)" \
                  --x-sequence-coords 0..4200 \
                  --y-sequence-coords 0..4600 \
                  --custom-filename GT-AG.rc \
                  --custom-filename GT-AG_sm.rc \
                  -- KCRB.hs.gff \
                     KCRB.mm.gff \
                     KCRB.GT.hs-mm.gff \
                     KCRB.AG.hs-mm.gff \
                   > KCRB.GT-AG.hs-mm.color_small.ps \
                  2> KCRB.GT-AG.hs-mm.color_small.log;
